<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>2021 MINI HOMEPAGE</title>
    <link rel="stylesheet" href="./static/css/layout.css" />
    <link rel="stylesheet" href="./static/css/font.css" />
    <link rel="stylesheet" href="./static/css/home.css" />
    <link rel="stylesheet" href="static/css/calendar.css">
  </head>
  <body>
    <div class="bookcover">
      <div class="bookdot">
        <div class="page">
          <div class="profile-container">
            <div class="box profile-box">
              <div class="profile-image">
                <img class="profile-image-img" id="profileImage" src="./static/images/cyworld1.png" alt="프로필 이미지" />
                <input type="file" id="profile-image-input" style="display: none;" accept="image/*">
                <button id="changeProfileImageButton" style="display: none;">프로필 사진 변경</button>
              </div>           
              <div class="profile-text font-kyobohand">
                프로필 자기소개
              </div>
              <div class="profile-username font-kyobohand">
                <span style="color: #0f1b5c">이름</span>
              </div>
              <button id="changeProfileButton">프로필 변경</button>
            </div>
          </div>
          <div class="content-container">
            <div class="header content-title">
              <div class="content-title-name">다이어리</div>
            </div>
            <div class="buttons-container">
              <!-- 내 닉네임 -->
              <button id="nickname">내 닉네임</button>
              <!-- 메인으로 -->
              <button id="go-to-main">메인으로</button>
              <!-- 로그아웃 -->
              <button id="log-out" onClick="location.href='login.html'">로그아웃</button>
          </div>
          <div id="myModal" class="modal">
              <div class="modal-content">
                  <span class="close" onclick="closeModal()">&times;</span>
                  <p>무엇을 하시겠습니까?</p>
                  <button id="diaryButton" onclick="performAction('diary')">일기 쓰기</button> 
                  <button id="addStickerButton" onclick="toggleStickerAndWeatherButtons()">스티커 붙이기</button>
                  <button id="emojiButton" style="display: none;" onclick="showEmojiPicker()">표정 설정하기</button>
                  <button id="weatherButton" style="display: none;" onclick="showWeatherEmoji()">날씨 표시하기</button>         
              </div>
          </div>
          <!-- 이모지 선택 창 -->
          <div id="emojiPicker" class="emoji-picker">
              <div>
                  <span class="emoji" onclick="selectEmoji('😃')">😃</span>
                  <span class="emoji" onclick="selectEmoji('😊')">😊</span>
                  <span class="emoji" onclick="selectEmoji('😂')">😂</span>
                  <span class="emoji" onclick="selectEmoji('😒')">😒</span>
                  <span class="emoji" onclick="selectEmoji('😑')">😑</span>
                  <span class="emoji" onclick="selectEmoji('👍')">👍</span>
                  <span class="emoji" onclick="selectEmoji('🤣')">🤣</span>
                  <span class="emoji" onclick="selectEmoji('😴')">😴</span>
                  <span class="emoji" onclick="selectEmoji('❤️')">❤️</span>
                  <span class="emoji" onclick="selectEmoji('😁')">😁</span>
                  <span class="emoji" onclick="selectEmoji('😃')">😃</span>
                  <span class="emoji" onclick="selectEmoji('😅')">😅</span>
                  <span class="emoji" onclick="selectEmoji('😉')">😉</span>
                  <span class="emoji" onclick="selectEmoji('😋')">😋</span>
                  <span class="emoji" onclick="selectEmoji('😎')">😎</span>
                  <span class="emoji" onclick="selectEmoji('😍')">😍</span>
                  <!-- 다른 이모지 추가 -->
              </div>
          </div>
            <div class="box content-box">
              <table class="Calendar">
                <thead>
                    <tr>
                        <td onClick="prevCalendar();" style="cursor:pointer;">&#60;</td>
                        <td colspan="5">
                            <span id="calYear"></span>년
                            <span id="calMonth"></span>월
                        </td>
                        <td onClick="nextCalendar();" style="cursor:pointer;">&#62;</td>
                    </tr>
                    <tr>
                        <td>일</td>
                        <td>월</td>
                        <td>화</td>
                        <td>수</td>
                        <td>목</td>
                        <td>금</td>
                        <td>토</td>
                    </tr>
                </thead>
    
                <tbody>
                </tbody>
            </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="static/js/calendar.js"></script>
    <script src="static/js/profile.js"></script>
    <script src="static/js/home.js"></script>
  </body>
</html>


<script>
  //기술적 오류로 아직 못옮김
  document.getElementById('changeProfileButton').addEventListener('click', function() {
    changeProfile();
  });

  function changeProfile() {
    const profileTextElement = document.querySelector('.profile-text');
    const profileUsernameElement = document.querySelector('.profile-username');

    const profileText = profileTextElement.innerText;
    const profileUsername = profileUsernameElement.innerText;

    profileTextElement.innerHTML = `<input type="text" id="newProfileText" value="${profileText}">`;
    profileUsernameElement.innerHTML = `<input type="text" id="newProfileUsername" value="${profileUsername}">`;

    // 저장 버튼 추가
    const saveButton = document.createElement('button');
    saveButton.textContent = '저장';
    saveButton.addEventListener('click', saveChanges);
    profileUsernameElement.appendChild(saveButton);

    // 프로필 변경 버튼 숨김 (제거)
    document.getElementById('changeProfileButton').style.display = 'none';
  }

  function saveChanges() {
    const newProfileText = document.getElementById('newProfileText').value;
    const newProfileUsername = document.getElementById('newProfileUsername').value;

    const profileTextElement = document.querySelector('.profile-text');
    const profileUsernameElement = document.querySelector('.profile-username');

    profileTextElement.innerHTML = newProfileText;
    profileUsernameElement.innerHTML = `<span style="color: #0f1b5c">${newProfileUsername}</span>`;

    // 프로필 변경 버튼 다시 보이기
    document.getElementById('changeProfileButton').style.display = 'inline-block';

    // 프로필 사진 변경 버튼 숨기기
    document.getElementById('changeProfileImageButton').style.display = 'none';
}


  document.getElementById('changeProfileButton').addEventListener('click', function() {
    showChangeProfileImage();
  });

  document.getElementById('changeProfileImageButton').addEventListener('click', function() {
    document.getElementById('profile-image-input').click();
  });

  // 프로필 사진 변경 버튼 표시
  function showChangeProfileImage() {
    document.getElementById('changeProfileImageButton').style.display = 'inline-block';
  }

  // 파일 선택 시 실행되는 함수
  document.getElementById('profile-image-input').addEventListener('change', function(event) {
    const selectedFile = event.target.files[0];
    const profileImage = document.getElementById('profileImage');

    // 파일을 읽어서 이미지로 설정
    const reader = new FileReader();
    reader.onload = function() {
      profileImage.src = reader.result;
    };

    if (selectedFile) {
      reader.readAsDataURL(selectedFile);
    }
  });
</script>