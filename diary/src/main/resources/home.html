<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>2021 MINI HOMEPAGE</title>
    <link rel="stylesheet" href="./static/css/layout.css" />
    <link rel="stylesheet" href="./static/css/font.css" />
    <link rel="stylesheet" href="./static/css/home.css" />
    <link rel="stylesheet" href="static/css/calendar.css">
  </head>
  <body>
    <div class="bookcover">
      <div class="bookdot">
        <div class="page">
          <div class="profile-container">
            <div class="box profile-box">
              <div class="profile-image">
                <img class="profile-image-img" id="profileImage" src="./static/images/cyworld1.png" alt="í”„ë¡œí•„ ì´ë¯¸ì§€" />
                <input type="file" id="profile-image-input" style="display: none;" accept="image/*">
                <button id="changeProfileImageButton" style="display: none;">í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½</button>
              </div>           
              <div class="profile-text font-kyobohand">
                í”„ë¡œí•„ ìê¸°ì†Œê°œ
              </div>
              <div class="profile-username font-kyobohand">
                <span style="color: #0f1b5c">ì´ë¦„</span>
              </div>
              <button id="changeProfileButton">í”„ë¡œí•„ ë³€ê²½</button>
            </div>
          </div>
          <div class="content-container">
            <div class="header content-title">
              <div class="content-title-name">ë‹¤ì´ì–´ë¦¬</div>
            </div>
            <div class="buttons-container">
              <!-- ë‚´ ë‹‰ë„¤ì„ -->
              <button id="nickname">ë‚´ ë‹‰ë„¤ì„</button>
              <!-- ë©”ì¸ìœ¼ë¡œ -->
              <button id="go-to-main">ë©”ì¸ìœ¼ë¡œ</button>
              <!-- ë¡œê·¸ì•„ì›ƒ -->
              <button id="log-out" onClick="location.href='login.html'">ë¡œê·¸ì•„ì›ƒ</button>
          </div>
          <div id="myModal" class="modal">
              <div class="modal-content">
                  <span class="close" onclick="closeModal()">&times;</span>
                  <p>ë¬´ì—‡ì„ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                  <button id="diaryButton" onclick="performAction('diary')">ì¼ê¸° ì“°ê¸°</button> 
                  <button id="addStickerButton" onclick="toggleStickerAndWeatherButtons()">ìŠ¤í‹°ì»¤ ë¶™ì´ê¸°</button>
                  <button id="emojiButton" style="display: none;" onclick="showEmojiPicker()">í‘œì • ì„¤ì •í•˜ê¸°</button>
                  <button id="weatherButton" style="display: none;" onclick="showWeatherEmoji()">ë‚ ì”¨ í‘œì‹œí•˜ê¸°</button>         
              </div>
          </div>
          <!-- ì´ëª¨ì§€ ì„ íƒ ì°½ -->
          <div id="emojiPicker" class="emoji-picker">
              <div>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜ƒ')">ğŸ˜ƒ</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜Š')">ğŸ˜Š</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜‚')">ğŸ˜‚</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜’')">ğŸ˜’</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜‘')">ğŸ˜‘</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ‘')">ğŸ‘</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ¤£')">ğŸ¤£</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜´')">ğŸ˜´</span>
                  <span class="emoji" onclick="selectEmoji('â¤ï¸')">â¤ï¸</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜')">ğŸ˜</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜ƒ')">ğŸ˜ƒ</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜…')">ğŸ˜…</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜‰')">ğŸ˜‰</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜‹')">ğŸ˜‹</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜')">ğŸ˜</span>
                  <span class="emoji" onclick="selectEmoji('ğŸ˜')">ğŸ˜</span>
                  <!-- ë‹¤ë¥¸ ì´ëª¨ì§€ ì¶”ê°€ -->
              </div>
          </div>
            <div class="box content-box">
              <table class="Calendar">
                <thead>
                    <tr>
                        <td onClick="prevCalendar();" style="cursor:pointer;">&#60;</td>
                        <td colspan="5">
                            <span id="calYear"></span>ë…„
                            <span id="calMonth"></span>ì›”
                        </td>
                        <td onClick="nextCalendar();" style="cursor:pointer;">&#62;</td>
                    </tr>
                    <tr>
                        <td>ì¼</td>
                        <td>ì›”</td>
                        <td>í™”</td>
                        <td>ìˆ˜</td>
                        <td>ëª©</td>
                        <td>ê¸ˆ</td>
                        <td>í† </td>
                    </tr>
                </thead>
    
                <tbody>
                </tbody>
            </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="static/js/calendar.js"></script>
    <script src="static/js/profile.js"></script>
    <script src="static/js/home.js"></script>
  </body>
</html>


<script>
  //ê¸°ìˆ ì  ì˜¤ë¥˜ë¡œ ì•„ì§ ëª»ì˜®ê¹€
  document.getElementById('changeProfileButton').addEventListener('click', function() {
    changeProfile();
  });

  function changeProfile() {
    const profileTextElement = document.querySelector('.profile-text');
    const profileUsernameElement = document.querySelector('.profile-username');

    const profileText = profileTextElement.innerText;
    const profileUsername = profileUsernameElement.innerText;

    profileTextElement.innerHTML = `<input type="text" id="newProfileText" value="${profileText}">`;
    profileUsernameElement.innerHTML = `<input type="text" id="newProfileUsername" value="${profileUsername}">`;

    // ì €ì¥ ë²„íŠ¼ ì¶”ê°€
    const saveButton = document.createElement('button');
    saveButton.textContent = 'ì €ì¥';
    saveButton.addEventListener('click', saveChanges);
    profileUsernameElement.appendChild(saveButton);

    // í”„ë¡œí•„ ë³€ê²½ ë²„íŠ¼ ìˆ¨ê¹€ (ì œê±°)
    document.getElementById('changeProfileButton').style.display = 'none';
  }

  function saveChanges() {
    const newProfileText = document.getElementById('newProfileText').value;
    const newProfileUsername = document.getElementById('newProfileUsername').value;

    const profileTextElement = document.querySelector('.profile-text');
    const profileUsernameElement = document.querySelector('.profile-username');

    profileTextElement.innerHTML = newProfileText;
    profileUsernameElement.innerHTML = `<span style="color: #0f1b5c">${newProfileUsername}</span>`;

    // í”„ë¡œí•„ ë³€ê²½ ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê¸°
    document.getElementById('changeProfileButton').style.display = 'inline-block';

    // í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
    document.getElementById('changeProfileImageButton').style.display = 'none';
}


  document.getElementById('changeProfileButton').addEventListener('click', function() {
    showChangeProfileImage();
  });

  document.getElementById('changeProfileImageButton').addEventListener('click', function() {
    document.getElementById('profile-image-input').click();
  });

  // í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½ ë²„íŠ¼ í‘œì‹œ
  function showChangeProfileImage() {
    document.getElementById('changeProfileImageButton').style.display = 'inline-block';
  }

  // íŒŒì¼ ì„ íƒ ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
  document.getElementById('profile-image-input').addEventListener('change', function(event) {
    const selectedFile = event.target.files[0];
    const profileImage = document.getElementById('profileImage');

    // íŒŒì¼ì„ ì½ì–´ì„œ ì´ë¯¸ì§€ë¡œ ì„¤ì •
    const reader = new FileReader();
    reader.onload = function() {
      profileImage.src = reader.result;
    };

    if (selectedFile) {
      reader.readAsDataURL(selectedFile);
    }
  });
</script>